---
layout: default
---

# Thoughts

 - Frontend should not decide what resources are available to current user, instead API should provide frontend with what is available.
 
 - Frontend may need to be built (and usually is) to handle API resources in a custom manner (i.e. display blog post). The documentation of the API resource endpoints needs to be provided.

 - Permissions of users on documents should be abstracted from controllers
 
 - Documents states should be, apart from standard CRUD operations, controlled by predefined workflows (i.e. draft -> pending approval -> published ).
 
 - Frontend should not (note: contradicts REST?!) know which state will document end in, just which action is available. For example blog writer should know that `publish` action is available for the user and document, but shouldn't know, that the document would go `pending approval`. This is driven by these thoughts:
   - Frontend should not need to know the business logic of the workflow.
   - User should care only about their actions, not where the document goes next, i.e. separation of concerns.
   - When workflow changes, nothing should change for current action, if it is not the subject of change itself.
 
 - Despite workflow integration, API should follow REST guidelines.
 
 - API should be self documented, changes in API should automatically propagate to docs
 
 - This framework should not reinvent the wheel and make use of underlying request handling solutions (ExpressJS, Fastify, Restify)

# Solutions

### HATEOAS HAL Support
 - [ ] Root endpoint contains _links JSON object with global resources as properties
 - [ ] Each document is appended with _links JSON object with child resources as properties
 - [ ] Each `_links` object contains `self` resource which represents current document
 - [ ] Each `_links` property contains `href` property, which contains URL
 - [ ] Each `_links` property contains `methods` object which shows possible methods as keys and their boolean availability as values
 - [ ] Each document is appended with `_actions` object with possible workflow state changing actions
 - [ ] Each `_actions` property contains `href` property, which contains URL where POST request is issued to traverse document state
 - [ ] For each `_links` item, availability for current user and document is shown.

### Route and Document Level Access Control
 - [ ] Users are grouped into roles
 - [ ] Permissions authorize user to perform certain actions on certain resources (i.e. modify a post)
 - [ ] Permissions contain filters to control access to individual documents based on their attributes
 - [ ] Permissions contain filters to control access to properties of documents 
 
### Built-in document workflow status support
 - [ ] Document workflow is defined in a declarative way.
 - [ ] Document workflow state changes (i.e. actions) are automatically handled by the framework 

### OpenApi and TypeScript documentation
 - [ ] OpenAPI documentation is autogenerated from defined routes and provided descriptions.
 - [ ] Response body contents for OpenAPI are taken from controller methods' TypeScript output declarations
 - [ ] Typescript declaration file containing interfaces of API endpoints is provided